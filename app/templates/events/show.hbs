<article class='EventShow'>
  <header>
    {{#if model.imageUrl}}
      <div class='Container--noGutter'>
        <div class='row'>
          <div class='col-md-4 hidden-xs'>
            {{background-image imageUrl=model.imageUrl class='PhotoBanner-thumbnail'}}
          </div>
        </div>
      </div>
    {{/if}}
    <div class='PhotoBanner {{if model.imageUrl 'PhotoBanner--padded'}}'>
      {{background-image imageUrl=model.imageUrl class='PhotoBanner-curtainImage'}}
      <div class='PhotoBanner-curtain'></div>
      <div class='PhotoBanner-content Container--noGutter'>
        <div class='row'>
          <div class='col-xs-12 {{if model.imageUrl 'col-sm-7 col-sm-offset-5 col-md-8 col-md-offset-4'}}'>
            <h1 class='PhotoBanner-title'>{{x-truncate text=model.title maxLength=50}}</h1>
            <h2 class='PhotoBanner-subtitle'>{{model.subtitle}}</h2>
            <h2 class='PhotoBanner-subtitle'>{{model.timeRange}}</h2>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class='Container--noGutter ContentBody'>
    <div class='row'>

      <div class='col-md-2 hidden-sm hidden-xs'>
        {{#unless isPreview}}
          {{back-button routeName='events'}}
        {{/unless}}
      </div>

      <div class='col-sm-12 col-md-8'>
        <div class='EventShow-info row'>
          {{#if model.hasLocationInfo}}
            <div class='col-sm-4'>
              <div class='EventInfo'>
                <h1 class='EventInfo-header'>
                  {{fa-icon 'map-marker EventInfo-icon'}}

                  {{#if model.venueName}}
                    {{#if model.venueUrl}}
                      {{#normalized-link url=model.venueUrl class='EventInfo-headerLink'}}
                        {{model.venueName}}
                      {{/normalized-link}}
                    {{else}}
                      {{model.venueName}}
                    {{/if}}
                  {{else}}
                    Location
                  {{/if}}
                </h1>

                {{#if model.hasLocationInfo}}
                  {{event-map
                    locateName=model.venueLocateName
                    fullAddress=model.fullAddress
                    directionsUrl=model.directionsUrl
                    class='hidden-xs'
                  }}
                  <a href='{{model.directionsUrl}}' target='_blank' class='EventInfo-address'>
                    {{model.venueAddress}}, {{model.venueCity}}
                  </a>
                {{/if}}
              </div>
            </div>
          {{/if}}

          {{#if model.hasContactInfo}}
            <div class='col-sm-4'>
              <div class='EventInfo'>
                <h1 class='EventInfo-header'>
                  {{fa-icon 'user EventInfo-icon'}}
                  Contact
                </h1>
                <div class='hidden-xs'>
                  <div class='EventInfo-contactInfo clearfix'>
                    {{fa-icon 'envelope EventInfo-contactIcon'}}
                    <div class='EventInfo-contactItem u-textTruncate'>
                      <a href="mailto:{{model.contactEmail}}">
                        {{model.contactEmail}}
                      </a>
                    </div>
                  </div>

                  <div class='EventInfo-contactInfo clearfix'>
                    {{fa-icon 'phone EventInfo-contactIcon EventInfo-phoneIcon'}}
                    <div class='EventInfo-contactItem u-textTruncate'>
                      <a href='tel:{{model.contactPhone}}'>{{model.contactPhone}}</a>
                    </div>
                  </div>

                  <div class='EventInfo-contactInfo clearfix'>
                    {{fa-icon 'link EventInfo-contactIcon EventInfo-linkIcon'}}
                    <div class='EventInfo-contactItem u-textTruncate'>
                      {{#normalized-link url=model.eventUrl}}
                        {{model.eventUrl}}
                      {{/normalized-link}}
                    </div>
                  </div>
                </div>

                <div class='visible-xs'>
                  <div class='u-textBold u-textTruncate'>
                    <a href='tel:{{model.contactPhone}}'>
                      {{model.contactPhone}}
                    </a>
                  </div>
                  <div class='u-textUnderline u-textTruncate'>
                    <a href="mailto:{{model.contactEmail}}">
                      {{model.contactEmail}}
                    </a>
                  </div>
                </div>
              </div>
            </div>
          {{/if}}

          {{#if model.costType}}
            <div class='col-sm-3'>
              <div class='EventInfo'>
                <h1 class='EventInfo-header'>
                  {{fa-icon 'dollar EventInfo-icon'}}
                  {{model.formattedCostType}}
                </h1>
                <strong>{{model.cost}}</strong>
              </div>
            </div>
          {{/if}}
        </div>

        <div class='row'>
          <div class='EventShow-content col-md-12 col-sm-9'>
            {{{model.content}}}
          </div>
          <div class='visible-sm col-sm-3'>
            {{social-share}}

            {{report-content-details contentId=model.contentId}}

            {{#if model.canEdit}}
              {{edit-content-link
                contentId=model.id
                route='events.edit'
                text='Edit Event'
              }}
            {{/if}}
          </div>
        </div>
      </div>

      <div class='col-md-2 hidden-sm hidden-xs u-layoutMobilePadding0'>
        {{social-share}}

        {{report-content-details contentId=model.contentId}}

        {{#if model.canEdit}}
          {{edit-content-link
            contentId=model.id
            route='events.edit'
            text='Edit Event'
          }}
        {{/if}}
      </div>
    </div>

    {{event-other-dates instance=model}}

    {{#unless isPreview}}
      {{partial 'partials/related-promotion'}}
    {{/unless}}

    <h1 class='SectionHeader SectionHeader--paddedTop'>
      <span class='SectionHeader-text'>
        Talk
      </span>
    </h1>
    <div class='row'>
      {{content-comments
          contentTitle=model.title
          contentId=model.contentId
          commentingDisabled=model.isNew
        }}
    </div>

    {{#unless isPreview}}
      {{similar-content
        contentId=model.contentId
        limit=4
      }}
    {{/unless}}
  </main>

</article>
