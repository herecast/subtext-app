
{{#blogger-intro class="BloggerIntro-main-wrap" start-if=startIntro as |blogger-intro|}}

  {{blogger-intro.step step=1
    modal=true
    replaceTooltip=true
    scope='body'
    hideHelperLayer=false
    highlightedIdentifier='.BloggerIntro-main-wrap'
    highlightPositionVertical='center'
    highlightPositionHorizontal='right'
    nextButton="Let's Get Started"
    avatarUrl=avatarUrls.smiling
    title="Hi, I'm Jennifer from DailyUV! Let's build your blog homepage."
    subtitle="Everything is editable after you've created your homepage, so not to worry!"
  }}

  {{#blogger-intro.step step=2
    modal=true
    nextButton=(if currentUserIsBlogger null "All Set")
    nextButtonDisabled=(or hasNoCurrentUser currentUserIsBlogger)
    avatarUrl=avatarUrls.smiling
    infoText="You need a DailyUV account to blog. I'll see if you've got one. If not, we'll set you up."
  }}
    {{blogger-intro/login}}
  {{/blogger-intro.step}}


  {{#x-card noShadow=noShadow class="OrganizationProfileHeaderCard-card-wrap"}}
    <div class="OrganizationProfileHeaderCard-header-image-wrap">
      {{#blogger-intro.step step=3
        modal=true
        replaceTooltip=true
        actionButton="Upload New Image"
        actionButtonAction=(action 'uploadBackgroundImage')
        confirmButton="Looks good"
        confirmButtonAction=(action 'setBackgroundImage')
        avatarUrl=(if hasNewOrganizationProfileImage avatarUrls.thumbsup avatarUrls.smiling)
        title="Add a banner image to give your page more zazzle."
        highlightedIdentifier='.OrganizationProfileHeaderCard-header-image'
        class="OrganizationProfileHeaderCard-header-image"
      }}
        {{file-input allowedExtensions='.jpg,.jpeg,.png' action=(action 'backgroundImageSelected') inputClass=backgroundImageInputClass}}
        {{header-image
          imageUrl=organization.backgroundImageUrl
          profileHeader=true
          class='OrganizationProfileHeaderCard-header-image'
        }}
      {{/blogger-intro.step}}

      {{#blogger-intro.step step=4
        modal=true
        replaceTooltip=true
        onStepStartAction=(action 'setProfileImageToStock')
        actionButton="Upload New Image"
        actionButtonAction=(action 'uploadProfileImage')
        confirmButton="Looks good"
        confirmButtonAction=(action 'setProfileImage')
        avatarUrl=(if hasNewOrganizationProfileImage avatarUrls.thumbsup avatarUrls.smiling)
        title="Add a profile picture to help readers connect with who you are."
        highlightedIdentifier='.OrganizationProfileHeaderCard-profile-image'
        class="OrganizationProfileHeaderCard-profile-image"
      }}
        {{file-input allowedExtensions='.jpg,.jpeg,.png' action=(action 'profileImageSelected') inputClass=profileImageInputClass}}
        <div class="OrganizationProfileHeaderCard-profile-image">
          <img src="{{optimized-image-url organization.profileImageUrl 150 150 true}}"
               class="OrganizationProfileHeaderCard-profile-image-avatar">
        </div>
      {{/blogger-intro.step}}
    </div>

    {{#blogger-intro.step step=5
      modal=true
      replaceTooltip=true
      onStepStartAction=(action 'nameStepStart')
      confirmButton=(if organizationNameIsGood 'Looks Good' 'Please Enter a Name')
      confirmButtonDisabled=(not organizationNameIsGood)
      confirmButtonIsLoading=isCheckingOrganizationName
      avatarUrl=(if organizationNameIsGood avatarUrls.thumbsup avatarUrls.thinking)
      title="What would you like to name your blog?"
      highlightedIdentifier='.OrganizationProfileHeaderCard-name'
      as |isCurrentStep|
    }}
      {{#content-body verticalPadding=true background=true class=(if isCurrentStep 'on-top-of-modal')}}
        {{#title-text noMargin=true center=true strong=true}}
          <div class="OrganizationProfileHeaderCard-name">
            {{#unless isCurrentStep}}
              {{organization.name}}
            {{else}}
              {{input
                id='blog-name'
                placeholder='Blog Name...'
                class='BloggerIntro-Step-input'
                value=organization.name
                class='BloggerIntro-Step-blog-name'
                keyUp=(action 'nameIsChanging')
              }}
              <div class="BloggerIntro-Step-name-length">
                {{nameLengthText}}
              </div>
            {{/unless}}
          </div>
        {{/title-text}}
      {{/content-body}}
    {{/blogger-intro.step}}
  {{/x-card}}

  <div class="Startablog--container">
    {{#x-card noShadow=flattenCard noMargin=flattenCard}}
      <div class="Startablog--contact-box">
        {{#blogger-intro.step step=6
          modal=true
          replaceTooltip=true
          onStepStartAction=(action 'emailStepStart')
          nextButton=connectEmailButtonText
          nextButtonAction=(action 'useDefaultEmail')
          innerStepButton=(unless wantsNewEmail "Use Different Email")
          innerStepButtonAction=(action 'useDifferentEmail')
          confirmButton=(if wantsNewEmail (if hasValidEmail (concat 'Use ' organization.email) 'We Need a Valid Email'))
          confirmButtonDisabled=(not hasValidEmail)
          avatarUrl=(if (and wantsNewEmail hasValidEmail) avatarUrls.thumbsup avatarUrls.smiling)
          title="What email do you want readers to use to reach you?"
          highlightedIdentifier='.OrganizationContactCard-email'
          class="OrganizationContactCard-item"
          as |isCurrentStep|
        }}
          <div class="OrganizationContactCard-email {{if isCurrentStep 'on-top-of-modal'}}">
            {{#unless (and isCurrentStep wantsNewEmail)}}
              <a href="#" target="_blank" title="Email">
                {{fa-icon 'envelope'}}
                {{organization.email}}
              </a>
            {{else}}
              {{input
                id='blog-email'
                placeholder='Email...'
                class='BloggerIntro-Step-input'
                value=organization.email
                class='BloggerIntro-Step-blog-email'
                keyUp=(action 'emailIsChanging')
              }}
            {{/unless}}

          </div>
        {{/blogger-intro.step}}

        {{#blogger-intro.step step=7
          modal=true
          replaceTooltip=true
          onStepStartAction=(action 'websiteStepStart')
          nextButton="Skip for Now"
          nextButtonAction=(action 'useNoWebsite')
          confirmButton=(if hasValidWebsite (concat 'Use ' organization.website) 'Need Valid Website')
          confirmButtonDisabled=(not hasValidWebsite)
          avatarUrl=(if hasValidWebsite avatarUrls.thumbsup avatarUrls.thinking)
          title="What social media or website do you want readers to visit?"
          infoText="Twitter handle? Personal website?"
          highlightedIdentifier='.OrganizationContactCard-website'
          class="OrganizationContactCard-item"
          as |isCurrentStep|
        }}
          <div class="OrganizationContactCard-website {{if isCurrentStep 'on-top-of-modal'}}">
            {{#unless isCurrentStep}}
              <a href="{{organization.websiteLink}}" target="_blank" title="Website">
                {{fa-icon 'link'}} {{#unless organization.website}}No {{/unless}}Website
              </a>
            {{else}}
              {{input
                id='blog-website'
                type='url'
                placeholder='Social Link...'
                class='BloggerIntro-Step-input'
                value=organization.website
                class='BloggerIntro-Step-blog-website'
              }}
            {{/unless}}
          </div>
        {{/blogger-intro.step}}

      </div>
    {{/x-card}}

    {{#blogger-intro.step step=8
      modal=true
      replaceTooltip=true
      onStepStartAction=(action 'descriptionStepStart')
      confirmButton="Looks Good"
      avatarUrl=(if hasValidDescription avatarUrls.thumbsup avatarUrls.thinking)
      title="Describe yourself and your blog to your readers."
      infoText="A couple of sentences willdo -- and don't agonize! You can change this later."
      highlightedIdentifier='.OrganizationContactCard-description'
      class="OrganizationContactCard-description"
      as |isCurrentStep|
    }}
      {{#x-card class='OrganizationContactCard-description'}}
        {{#card-body shortPadding=true class=(if isCurrentStep 'on-top-of-modal')}}

          {{#content-label}}
            About {{organization.name}}
          {{/content-label}}

          {{#text-block}}
            {{#unless isCurrentStep}}
              {{organization.description}}
            {{else}}
              {{textarea value=organization.description class='BloggerIntro-Step-description-textarea'}}
            {{/unless}}
          {{/text-block}}

        {{/card-body}}
      {{/x-card}}
    {{/blogger-intro.step}}
  </div>

  {{#blogger-intro.step step=9
    modal=true
    confirmButton="I agree!"
    confirmButtonAction=(action 'createBlog')
    avatarUrl=(if isCreatingOrganization avatarUrls.delighted avatarUrls.smiling)
    title=(if isCreatingOrganization "Creating your homepage..." "Last step!")
    subtitle=(if isCreatingOrganization null "Before you can post, you need to review and accept our Publisher Agreement. Here it is in a nutshell:")
    hideNavigation=isCreatingOrganization
  }}
    {{#unless isCreatingOrganization}}
      {{blogger-intro/legal}}
    {{else}}
      <div class="BloggerIntro-Step-loading">
        <div class="BloggerIntro-Step-loading-icon">
          {{fa-icon 'cog' spin=true}}
        </div>
      </div>
    {{/unless}}

  {{/blogger-intro.step}}

{{/blogger-intro}}

<div class="Startablog--bottom-padding"></div>

{{outlet}}
